FROM node:24 AS build

ARG VITE_API_URL
ARG VITE_SOURCE_URL
ARG VITE_GITHUB_URL
ARG VITE_TELEGRAM_URL
ARG VITE_LICENSE_URL

ENV VITE_API_URL=$VITE_API_URL \
    VITE_SOURCE_URL=$VITE_SOURCE_URL \
    VITE_GITHUB_URL=$VITE_GITHUB_URL \
    VITE_TELEGRAM_URL=$VITE_TELEGRAM_URL \
    VITE_LICENSE_URL=$VITE_LICENSE_URL

WORKDIR /artndev-blog

COPY client/package*.json ./
RUN npm ci

COPY client/ ./
RUN npm run build